# ============================================================================
#                     TMUX MINIMALIST CONFIGURATION
#                  Based on "Dreams of Code" Philosophy
# ============================================================================
# "T-Max looks much better without installing a theme and instead just
#  applying a few style tweaks here and there."
#
# Design principles:
# - Subtle over obtrusive
# - Functional over decorative
# - No arrows or heavy visual elements
# - Status bar at top (avoids gap issues at bottom)
# ============================================================================

# ============================================================================
# COLOR PALETTE (Nord-inspired)
# ============================================================================

# Define colors for reuse
%hidden GRAY_DARK="#2E3440"
%hidden GRAY_MED="#4C566A"
%hidden GRAY_LIGHT="#D8DEE9"
%hidden BLUE_MUTED="#5E81AC"
%hidden GREEN_SOFT="#A3BE8C"
%hidden CYAN="#88C0D0"
%hidden YELLOW="#EBCB8B"
%hidden RED="#BF616A"

# ============================================================================
# GENERAL SETTINGS
# ============================================================================

# Change prefix from C-b to C-a (easier to reach)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Enable mouse support
set -g mouse on

# Start window and pane numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase history limit
set -g history-limit 50000

# Remove delay for escape key
set -sg escape-time 0

# Terminal settings
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Enable focus events (for vim integration)
set -g focus-events on

# Activity monitoring
setw -g monitor-activity off
set -g visual-activity off

# ============================================================================
# KEY BINDINGS
# ============================================================================

# Reload config
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Split panes using | and - (more intuitive)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# New window in current path
bind c new-window -c "#{pane_current_path}"

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Pane resizing with prefix + H/J/K/L
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Quick window switching
bind -r p previous-window
bind -r n next-window

# Switch windows with Alt+number (no prefix needed)
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# Kill pane/window without confirmation
bind x kill-pane
bind X kill-window

# ============================================================================
# STATUS BAR POSITION
# From transcript: "Move to top - avoids gap issues at bottom"
# ============================================================================

set -g status-position top

# ============================================================================
# STATUS BAR STYLING
# From transcript: "Subtle and minimalist"
# ============================================================================

# Status bar length
set -g status-left-length 100
set -g status-right-length 100

# Status bar colors (transparent background)
set -g status-style "fg=#{GRAY_LIGHT},bg=default"

# ============================================================================
# STATUS LEFT (Session name)
# From transcript: "Green text with terminal icon"
# ============================================================================

# Terminal icon + session name in green, then separator
set -g status-left "#[fg=#{GREEN_SOFT},bold]  #S #[fg=#{GRAY_LIGHT},nobold]| "

# ============================================================================
# STATUS RIGHT (Clock and date)
# ============================================================================

set -g status-right "#[fg=#{GRAY_LIGHT}] %H:%M  %Y-%m-%d "

# If you have tmux-cpu plugin installed, use this instead:
# set -g status-right "#[fg=#{CYAN}] #{cpu_percentage} #[fg=#{YELLOW}]Û∞çõ #{ram_percentage} #[fg=#{GRAY_LIGHT}] %H:%M %Y-%m-%d "

# ============================================================================
# WINDOW STATUS (Middle section)
# From transcript: "Underline current window, no arrows"
# ============================================================================

# Non-current windows: simple format
set -g window-status-format "  #I #W  "

# Current window: cyan, bold, underlined with dot indicator
set -g window-status-current-format "#[fg=#{CYAN},bold,underscore]  #I #W  "

# Window status separator (none)
set -g window-status-separator ""

# ============================================================================
# MESSAGE STYLING
# From transcript: "Not visually obstructive"
# ============================================================================

set -g message-style "fg=#{GRAY_LIGHT},bg=default"

# ============================================================================
# MODE STYLING (selection menu, copy mode)
# From transcript: "Blue background for selection"
# ============================================================================

set -g mode-style "fg=#{GRAY_DARK},bg=#{BLUE_MUTED}"

# ============================================================================
# PANE BORDERS
# From transcript: "Subtle pane borders"
# ============================================================================

set -g pane-border-style "fg=#{GRAY_MED}"
set -g pane-active-border-style "fg=#{GRAY_LIGHT}"

# Display pane numbers
set -g display-panes-colour "#{GRAY_MED}"
set -g display-panes-active-colour "#{CYAN}"
set -g display-panes-time 2000

# ============================================================================
# COPY MODE (Vi-style)
# ============================================================================

setw -g mode-keys vi

# Enter copy mode with prefix + [
bind [ copy-mode

# Vi-style selection and copy
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi V send -X select-line
bind -T copy-mode-vi C-v send -X rectangle-toggle

# Copy to system clipboard (Wayland)
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "wl-copy"

# Copy to system clipboard (X11 - uncomment if using X11)
# bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -selection clipboard"

# Paste with prefix + p
bind p paste-buffer

# ============================================================================
# PLUGINS (Optional - using TPM)
# ============================================================================

# To use plugins, first install TPM:
# git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
#
# Then uncomment the following and press prefix + I to install:

# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-cpu'
# set -g @plugin 'tmux-plugins/tmux-yank'
# set -g @plugin 'christoomey/vim-tmux-navigator'

# Initialize TPM (keep at very bottom)
# run '~/.tmux/plugins/tpm/tpm'

# ============================================================================
# END OF CONFIGURATION
# ============================================================================
